(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{67:function(e,t,a){},68:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),c=a.n(s),i=(a(67),a(68),a(29)),o=a(7),l=a(86),d=a(79),j=a(87),u=a(1),b=function(){return Object(u.jsx)(l.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(u.jsxs)(d.a,{children:[Object(u.jsx)(l.a.Brand,{as:i.b,to:"/",children:"AdVideoMaker"}),Object(u.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(u.jsx)(l.a.Collapse,{id:"responsive-navbar-nav",children:Object(u.jsxs)(j.a,{className:"me-auto",children:[Object(u.jsx)(j.a.Link,{as:i.b,to:"/",children:"Home"}),Object(u.jsx)(j.a.Link,{as:i.b,to:"/createFeed",children:"Create Feed"}),Object(u.jsx)(j.a.Link,{as:i.b,to:"/createVideos",children:"Create Videos"})]})})]})})},h=a(80),p=a(61),f=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(d.a,{children:Object(u.jsx)(h.a,{className:"justify-content-md-center",children:Object(u.jsx)(p.a,{lg:"8",children:Object(u.jsxs)("div",{className:"mt-2 fs-4",children:[Object(u.jsx)("strong",{children:"Main Page"})," ",Object(u.jsx)("span",{})]})})})})})},x=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h3",{children:"Create Videos"})})},O=a(6),v=a(89),m=a(84),g=a(11),_=a.n(g),w=a(21),S=a(85),y=a(81),k=function(e){var t=e.setCreateFeedState,a=e.setAlertState,r=e.setData,s=Object(n.useState)(""),c=Object(O.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(""),d=Object(O.a)(l,2),j=d[0],b=d[1],h=Object(n.useState)("https://docs.google.com/spreadsheets/d/e/2PACX-1vQvm265NJfQjH0GtMLNRD7rJIA5vapYsz1BbIEsmdOYJGuvWlfARCYwy3SS9BmVGGOJ4-MGhcoO7h8w/pub?gid=0&single=true&output=csv"),p=Object(O.a)(h,2),f=p[0],x=p[1],v=function(){var e=Object(w.a)(_.a.mark((function e(){var n,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("loading"),a({show:!1,text:""}),"arge1234"!=i&&(t("checkURL"),a({show:!0,text:"Invalid username."})),e.next=5,fetch("https://shoevideo.azurewebsites.net/api/check_feed?"+new URLSearchParams({feedURL:f}),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});case 5:return n=e.sent,e.next=8,n.json();case 8:s=e.sent,n.ok?(s.feed_name=j,r(s),t("arrangeFeed")):(t("checkURL"),a({show:!0,text:s.detail}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(S.a,{onSubmit:function(e){v(),e.preventDefault()},children:[Object(u.jsxs)(S.a.Group,{className:"mb-3",children:[Object(u.jsx)(S.a.Label,{children:"Provide Username"}),Object(u.jsx)(S.a.Control,{required:!0,type:"text",placeholder:"",value:i,onInput:function(e){return o(e.target.value)}})]}),Object(u.jsxs)(S.a.Group,{className:"mb-3",children:[Object(u.jsx)(S.a.Label,{children:"Feed Name"}),Object(u.jsx)(S.a.Control,{required:!0,type:"text",placeholder:"Enter a name for your feed.",value:j,onInput:function(e){return b(e.target.value)}})]}),Object(u.jsxs)(S.a.Group,{className:"mb-3",children:[Object(u.jsx)(S.a.Label,{children:"Feed URL"}),Object(u.jsx)(S.a.Control,{type:"text",placeholder:"Enter feed URL.",value:f,onInput:function(e){return x(e.target.value)}})]}),Object(u.jsx)(y.a,{variant:"primary",type:"submit",children:"Submit"})]})})},C=a(82),F=a(88),L=function(e){var t=e.show,a=e.title,n=e.text,r=e.buttonText,s=e.handleClose,c=e.handleConfirm;return Object(u.jsxs)(F.a,{show:t,onHide:s,children:[Object(u.jsx)(F.a.Header,{closeButton:!0,children:Object(u.jsx)(F.a.Title,{children:a})}),Object(u.jsx)(F.a.Body,{children:n}),Object(u.jsxs)(F.a.Footer,{children:[Object(u.jsx)(y.a,{variant:"secondary",onClick:s,children:"Close"}),Object(u.jsx)(y.a,{variant:"primary",onClick:function(){c(),s()},children:r})]})]})},N=function(e){var t=e.setCreateFeedState,a=e.setAlertState,s=e.feedData,c=e.setData,i=Object(n.useState)(!1),o=Object(O.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(!1),b=Object(O.a)(j,2),f=b[0],x=b[1],v=Object(n.useState)(!1),m=Object(O.a)(v,2),g=m[0],k=m[1],F=Object(n.useState)(!1),N=Object(O.a)(F,2),A=N[0],T=N[1],D=[{col:"Image URL",set:d,get:l},{col:"Title",set:x,get:f},{col:"Body",set:k,get:g},{col:"Website URL",set:T,get:A}],U=Object(n.useState)(!1),P=Object(O.a)(U,2),V=P[0],R=P[1],G=function(){var e=Object(w.a)(_.a.mark((function e(){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("loading"),a({show:!1,text:""}),console.log(l,f,g,A),e.next=5,fetch("https://shoevideo.azurewebsites.net/api/create_feed",{method:"POST",body:JSON.stringify({user_id:1,feed_name:s.feed_name,feed_url:s.feed_url,img_url_col:l,title_col:f,site_url_col:A,body_col:g}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,n.ok?(console.log("feedData",s),console.log("return data",r),s.title_col=r.title_col,s.site_url_col=r.site_url_col,s.img_url_col=r.img_url_col,s.body_col=r.body_col,s.feed_id=r.feed_id,c(s),t("arrangeVisuals")):(t("checkURL"),a({show:!0,text:r.detail}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsxs)(S.a,{onSubmit:function(e){console.log("in save clikc"),l&&f&&g&&A?(R(!0),console.log("in if")):(console.log("in else"),a({show:!0,text:"Please fill all of the fields first."})),e.preventDefault()},children:[Object(u.jsx)(h.a,{children:D.map((function(e,t){return Object(u.jsxs)(r.a.Fragment,{children:[Object(u.jsx)(p.a,{children:Object(u.jsxs)(S.a.Group,{as:h.a,className:"mb-3",controlId:"formHorizontalPassword",children:[Object(u.jsx)(S.a.Label,{column:!0,sm:4,className:"text-end fw-bold",children:e.col}),Object(u.jsx)(p.a,{sm:8,children:Object(u.jsxs)(S.a.Select,{"aria-label":"Default select example",value:e.get,onChange:function(t){e.set(t.target.value)},children:[Object(u.jsx)("option",{disabled:!0,value:!1,children:"Select.."}),s.col_names.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e},t)}))]})})]})}),t%2===1&&Object(u.jsx)("div",{className:"w-100"})]},t)}))}),Object(u.jsx)(y.a,{variant:"primary",type:"submit",children:"Save"})]}),Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsxs)(C.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"#"}),s.col_names.map((function(e,t){return Object(u.jsx)("th",{children:e},t)}))]})}),Object(u.jsx)("tbody",{children:s.feed_data.data.map((function(e,t){return Object(u.jsx)("tr",{children:Object.values(e).map((function(e,t){return Object(u.jsx)("td",{children:e.toString().length<50?e:e.toString().substring(0,50)+"..."},t)}))},t)}))})]})}),Object(u.jsx)(L,{show:V,title:"Save Feed",text:"Are you sure to create a new feed?",buttonText:"Yes",handleClose:function(){return R(!1)},handleConfirm:G})]})},A=a(83),T=function(e){var t=e.height,a=void 0===t?100:t,n=e.width,r=void 0===n?200:n;return Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:a+"px",width:r+"px"},children:Object(u.jsx)(A.a,{animation:"border",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},D=function(e){var t=e.setCreateFeedState,a=(e.setAlertState,e.feedData);e.setData;console.log("here is preview data:",a);var r=Object(n.useState)(!1),s=Object(O.a)(r,2),c=s[0],i=s[1],o=function(){var e=Object(w.a)(_.a.mark((function e(){var n,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("loading"),e.next=3,fetch("https://shoevideo.azurewebsites.net/api/save_video_props_feed",{method:"POST",body:JSON.stringify({feed_id:a.feed_id}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,!n.ok){e.next=21;break}return e.next=10,fetch("https://shoevideo.azurewebsites.net/api/generate_video_feed",{method:"POST",body:JSON.stringify({video_ids:r.video_ids}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 10:return s=e.sent,e.next=13,s.json();case 13:if(e.sent,!s.ok){e.next=19;break}return t("success"),e.abrupt("return");case 19:e.next=21;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{width:"320",src:a.previewVideoUrl})}),Object(u.jsx)(y.a,{variant:"primary",onClick:function(e){i(!0)},children:"Start Generating Videos"}),Object(u.jsx)(L,{show:c,title:"Save Feed",text:"Are you sure to start generating videos from this feed?",buttonText:"Yes",handleClose:function(){return i(!1)},handleConfirm:o})]})},U=function(){var e=Object(w.a)(_.a.mark((function e(t){var a,n,r,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shoevideo.azurewebsites.net/api/save_video_props",{method:"POST",body:JSON.stringify({user_id:1,feed_id:t.feed_id,img_url:t.feed_data.data[0][t.img_url_col],title:t.feed_data.data[0][t.title_col],body:t.feed_data.data[0][t.body_col],site_url:t.feed_data.data[0][t.site_url_col]}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,!a.ok){e.next=19;break}return e.next=9,fetch("https://shoevideo.azurewebsites.net/api/generate_video",{method:"POST",body:JSON.stringify({video_id:n.video_id}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 9:return r=e.sent,e.next=12,r.json();case 12:if(s=e.sent,!r.ok){e.next=17;break}return e.abrupt("return",s.result_url);case 17:e.next=19;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){var t=e.setCreateFeedState,a=(e.setAlertState,e.feedData),n=e.setData;console.log("visuals data:",a);var r=function(){var e=Object(w.a)(_.a.mark((function e(r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("loading"),e.next=3,U(a);case 3:a.previewVideoUrl=e.sent,n(a),console.log("url: ",a.previewVideoUrl),t("preview");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:" Pick a theme "}),Object(u.jsx)("p",{children:" Pick a color etc..."}),Object(u.jsx)(y.a,{variant:"primary",onClick:r,children:"Continue"})]})},V=function(){var e=Object(n.useState)("checkURL"),t=Object(O.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({show:!1,text:""}),c=Object(O.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)({}),j=Object(O.a)(l,2),b=j[0],f=j[1],x=Object(n.useState)({percent:10,label:"1/5"}),g=Object(O.a)(x,2),_=g[0],w=g[1];Object(n.useEffect)((function(){switch(a){case"checkURL":w({percent:10,label:"1/5"});break;case"arrangeFeed":w({percent:35,label:"2/5"});break;case"arrangeVisuals":w({percent:60,label:"3/5"});break;case"preview":w({percent:85,label:"4/5"});break;case"success":w({percent:100,label:"5/5"});break;case"loading":break;default:return""}return function(){}}),[a]);return Object(u.jsx)("div",{children:Object(u.jsx)(d.a,{children:Object(u.jsx)(h.a,{className:"justify-content-md-center",children:Object(u.jsxs)(p.a,{lg:"8",children:[Object(u.jsxs)("div",{className:"mt-2 fs-4",children:[Object(u.jsx)("strong",{children:"Create a new feed:"})," ",Object(u.jsx)("span",{children:function(e){switch(e){case"checkURL":return"Provide a URL";case"arrangeFeed":return b.feed_name+" - Match the columns";case"arrangeVisuals":return b.feed_name+" - Arrange Visuals";case"preview":return b.feed_name+" - Video Preview";default:return""}}(a)})]}),Object(u.jsx)(v.a,{className:"fs-5 fw-bold",style:{height:"25px"},striped:!0,variant:"info",now:_.percent,label:_.label}),Object(u.jsx)(m.a,{className:"mt-2",variant:"danger",style:{visibility:i.show?"visible":"hidden",height:"50px"},children:i.text}),function(e){switch(e){case"checkURL":default:return Object(u.jsx)(k,{setCreateFeedState:r,setAlertState:o,setData:f});case"arrangeFeed":return Object(u.jsx)(N,{setCreateFeedState:r,setAlertState:o,feedData:b,setData:f});case"arrangeVisuals":return Object(u.jsx)(P,{setCreateFeedState:r,setAlertState:o,feedData:b,setData:f});case"preview":return Object(u.jsx)(D,{setCreateFeedState:r,setAlertState:o,feedData:b});case"success":return Object(u.jsx)("div",{className:"fs-5",children:"Videos successfully generated."});case"loading":return Object(u.jsx)(T,{width:300,height:200})}}(a)]})})})})};var R=function(){return Object(u.jsxs)(i.a,{children:[Object(u.jsx)(b,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"",element:Object(u.jsx)(f,{})}),Object(u.jsx)(o.a,{path:"createFeed",element:Object(u.jsx)(V,{})}),Object(u.jsx)(o.a,{path:"createVideos",element:Object(u.jsx)(x,{})})]})]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,90)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(76);c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root")),G()}},[[77,1,2]]]);
//# sourceMappingURL=main.4763fabc.chunk.js.map